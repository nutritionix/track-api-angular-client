/**
 * @license Track Api Angular Client
 * (c) 2016 Nutritionix, LLC. http://nutritinix.com
 * License: MIT
 */
!function(e,t,r){"use strict";var n=t.module("nix.track-api-client",[]);n.provider("nixTrackApiClient",function(){var e,r="https://trackapi.nutritionix.com/v1",a={},u={};this.setApiEndpoint=function(e){r=e},e=this.setApiCredentials=function(e,t){a.appId=e,a.appKey=t},this.setHttpConfig=function(e){t.isObject(e)&&(u=e)},this.$get=["$http",function(i){var o,s=function(e,t){return t=n.deepMerge({method:"GET",url:r+e,headers:{"x-user-jwt":s.getUserJwt(),"X-APP-ID":a.appId,"X-APP-KEY":a.appKey},params:{}},u,t),i(t)};return s.getUserJwt=function(){return t.isFunction(o)?o():o},s.setUserJwt=function(e){o=e},s.setApiCredentials=e,s.calories_nutrient=208,s.macronutrients=[204,606,205,291,269,203],s.natural={},s.natural.nutrients=function(e){return s("/natural/nutrients",{method:"POST",data:t.isString(e)?{query:e}:e})},s.natural.tags=function(e){return s("/natural/tags",{method:"POST",data:{query:e}})},s.natural.add=function(e){return s("/natural/add",{method:"POST",data:{query:e}})},s.natural.update=function(e,t){return s("/natural/update",{method:"PUT",data:{query:e,foods:t}})},s.log={},s.log.get=function(e,r){return t.isObject(e)&&(r=e,e=""),t.isObject(r)||(r={}),r.userId&&(e=r.userId),s("/log"+(e?"/"+e:""),{method:"GET",params:r})},s.log["delete"]=function(e){return s("/log",{method:"DELETE",data:{foods:e}})},s.log.add=function(e){return s("/log",{method:"POST",data:{foods:e}})},s.log.update=function(e){return s("/log",{method:"PUT",data:{foods:e}})},s.oauth={facebook:{}},s.oauth.facebook.i=function(e,t){return s("/oauth/facebook/i",{method:"POST",data:{access_token:e,ref_code:t}})},s.users=function(){return s("/users",{method:"GET"})},s.users.preferences=function(e){return s("/users/preferences",{method:"POST",data:{users:t.isArray(e)?e:[e]}})},s.me=function(){return s("/me",{method:"GET"})},s.auth={signup:{},updatePassword:{}},s.auth.signup.step1=function(e){return s("/auth/signup/step1",{method:"POST",data:e})},s.auth.signup.step2=function(e){return s("/auth/signup/step2",{method:"POST",data:e})},s.auth.signin=function(e){return s("/auth/signin",{method:"POST",data:e})},s.auth.updatePassword.request=function(e){var t={};return e.indexOf("@")?t.email=e:t.mobile_number=e,s("/auth/updatePassword",{method:"GET",params:t})},s.auth.updatePassword.set=function(e){return s("/auth/updatePassword",{method:"POST",data:e})},s.permissions={},s.permissions.request=function(e){return s("/premissions/request",{method:"POST",data:{users:t.isArray(e)?e:[e]}})},s.reports={},s.reports.totals=function(e){return s("/reports/totals",{method:"GET",params:e})},s.recipes={},s.recipes["delete"]=function(e){return s("/recipes",{method:"DELETE",data:{id:e}})},s.recipes.get=function(e,t){var r={};return t&&(r.user=t),e&&(r.id=e),s("/recipes",{method:"GET",params:r})},s.recipes.add=function(e,t){return s("/recipes",{method:"POST",data:{query:t,recipe_name:e}})},s.recipes.update=function(e,r,n){var a={id:e};return t.isUndefined(r)||(a.name=r),t.isUndefined(n)||(a.query=n),s("/recipes",{method:"PUT",headers:{"x-user-jwt":s.getUserJwt()},data:a})},s}]}),n.factory("nixTrackCalculator",function(){return{exerciseLevels:[{title:"Little to no exercise",factor:1.2},{title:"Light exercise (1-3 days per week)",factor:1.375},{title:"Moderate exercise (3-5 days per week)",factor:1.55},{title:"Heavy exercise (6-7 days per week)",factor:1.725},{title:"Very heavy exercise (twice per day, extra heavy workouts)",factor:1.9}],calculateBmr:function(e,t,r,n){return"f"===(e||"").toString().toLowerCase()[0]?447.593+9.247*t+3.098*r-4.33*n:88.362+13.397*t+4.799*r-5.677*n},calculateRecommendedCalories:function(e,t,r,n,a){return a=parseInt(a),(!a||0>a||a>4)&&(a=0),Math.round(this.exerciseLevels[a].factor*this.calculateBmr(e,t,r,n))}}}),n.filter("nutrient",function(){return function(e,r,n){var a;if(r=parseInt(r),r&&t.isArray(e))for(a in e)if(e.hasOwnProperty(a)&&parseInt(e[a].attr_id)===r)return n?e[a][n]:e[a];return null}}),n.deepMerge=function a(e,r){var n,u;if(arguments.length>2)return a(e,a.apply(null,Array.prototype.slice.call(arguments,1)));n=t.copy(e);for(u in r)r.hasOwnProperty(u)&&(n.hasOwnProperty(u)&&t.isObject(n[u])&&t.isObject(r[u])?n[u]=a(n[u],r[u]):n[u]=t.copy(r[u]));return n}}(window,window.angular);